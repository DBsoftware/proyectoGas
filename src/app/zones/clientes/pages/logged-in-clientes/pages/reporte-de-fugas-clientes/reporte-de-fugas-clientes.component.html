
<div fxLayout="row"
     class="registrer-container"
     fxLayoutAlign="center stretch">
  <div class="mat-elevation-z2 card-pqr">
    <h1 class="mat-h1">Reporte de Fugas</h1>
    <form
      fxLayout="column"
      [formGroup]="formFugas">
      <mat-form-field
        appearance="outline">
        <mat-label>Código de del cliente / Referencia pago</mat-label>
        <mat-select
          formControlName="codigo_cliente"
        placeholder="Seleccione el código de cliente referencia de pago">
          <mat-option value="">
            Seleccione un código
          </mat-option>
          <mat-option
            [value]="option.code"
            *ngFor="let option of codigoCliente$ | async">
            {{ option.code }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="formFugas.get('codigo_cliente').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Debe seleccionar un codigo de cliente"
            [errors]="formFugas.get('codigo_cliente').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>
      <mat-form-field
        appearance="outline">
        <mat-label>Tipo de identificación</mat-label>
        <mat-select
          required
          placeholder="Tipo de identificación"
          formControlName="tipo_identificacion">
          <mat-option value="">
            Seleccione una opción
          </mat-option>
          <mat-option
            *ngFor="let option of tipo_id$ | async"
            [value]="option.id">
            {{ option.description }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="formFugas.get('tipo_identificacion').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Debe seleccionar un tipo de identificación"
            [errors]="formFugas.get('tipo_identificacion').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>
      <mat-form-field
        appearance="outline">
        <mat-label>Identificación</mat-label>
        <input
          type="text"
          matInput
          placeholder="identificación"
          formControlName="identificacion"
          required>
        <mat-error *ngIf="formFugas.get('identificacion').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Escribir la identificación es requerido"
            [errors]="formFugas.get('identificacion').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>
      <div
        fxLayout="row"
        fxLayoutAlign="center stretch"
        fxLayoutGap="10px">
          <mat-form-field
            class="width-field"
            appearance="outline">
            <mat-label>Primer Nombre</mat-label>
            <input
              type="text"
              matInput
              placeholder="Escribe tu primer nombre"
              formControlName="nombre"
              required>
            <mat-error *ngIf="formFugas.get('nombre').status === 'INVALID'">
              <app-form-errors
                errorPrefix="Este campo es requerido"
                [errors]="formFugas.get('nombre').errors">
              </app-form-errors>
            </mat-error>
          </mat-form-field>
          <mat-form-field
            class="width-field"
            appearance="outline">
            <mat-label>Segundo Nombre</mat-label>
            <input
              type="text"
              matInput
              placeholder="Escribe tu segundo nombre"
              formControlName="nombre2">
            <mat-error *ngIf="formFugas.get('nombre2').status === 'INVALID'">
              <app-form-errors
                errorPrefix="Este campo es requerido"
                [errors]="formFugas.get('nombre2').errors">
              </app-form-errors>
            </mat-error>
          </mat-form-field>
      </div>
      <div
        fxLayout="row"
        fxLayoutAlign="center stretch"
        fxLayoutGap="10px">
          <mat-form-field
            class="width-field"
            appearance="outline">
            <mat-label>Primer apellido</mat-label>
            <input
              type="text"
              matInput
              placeholder="Escribe tu primer apellido"
              formControlName="apellido"
              required>
            <mat-error *ngIf="formFugas.get('apellido').status === 'INVALID'">
              <app-form-errors
                errorPrefix="Este campo es requerido"
                [errors]="formFugas.get('apellido').errors">
              </app-form-errors>
            </mat-error>
          </mat-form-field>
          <mat-form-field
            class="width-field"
            appearance="outline">
            <mat-label>Segundo apellido</mat-label>
            <input
              type="text"
              matInput
              placeholder="Escribe tu segundo apellido"
              formControlName="apellido2">
            <mat-error *ngIf="formFugas.get('apellido2').status === 'INVALID'">
              <app-form-errors
                errorPrefix="Este campo es requerido"
                [errors]="formFugas.get('apellido2').errors">
              </app-form-errors>
            </mat-error>
          </mat-form-field>
      </div>
      <mat-form-field
        appearance="outline">
        <mat-label>Dirección</mat-label>
        <input
          type="text"
          matInput
          placeholder="Escribe tu dirección"
          formControlName="direccion"
          required>
        <mat-error *ngIf="formFugas.get('direccion').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Este campo es requerido"
            [errors]="formFugas.get('direccion').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>
      <mat-form-field
        appearance="outline">
        <mat-label>Barrio</mat-label>
        <input
          type="text"
          matInput
          placeholder="Escribe tu barrio"
          formControlName="barrio"
          required>
        <mat-error *ngIf="formFugas.get('barrio').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Este campo es requerido"
            [errors]="formFugas.get('barrio').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>
      <mat-form-field
        appearance="outline">
        <mat-label>Celular</mat-label>
        <input
          type="number"
          matInput
          placeholder="Escribe tu celular"
          formControlName="celular"
          required>
        <mat-error *ngIf="formFugas.get('celular').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Este campo es requerido"
            [errors]="formFugas.get('celular').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>
      <mat-form-field
        appearance="outline">
        <mat-label>Teléfono</mat-label>
        <input
          type="number"
          matInput
          placeholder="Escribe el número télefonico"
          formControlName="telefono"
          required>
        <mat-error *ngIf="formFugas.get('telefono').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Este campo es requerido"
            [errors]="formFugas.get('telefono').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>
      <mat-form-field
        appearance="outline">
        <mat-label>Tipo de fuga</mat-label>
        <mat-select
          required
          placeholder="Tipo de identificación"
          formControlName="tipo_fuga">
          <mat-option value="">
            Seleccione una opción
          </mat-option>
          <mat-option
            *ngFor="let option of  tipo_fuga$ | async"
            [value]="option.id">
            {{ option.description }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="formFugas.get('tipo_fuga').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Debe seleccionar un tipo de fuga"
            [errors]="formFugas.get('tipo_fuga').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>
      <mat-form-field
        appearance="outline">
        <mat-label>Email</mat-label>
        <input
          matInput
          placeholder="Escribe el Email"
          formControlName="email"
          required>
        <mat-error *ngIf="formFugas.get('email').status === 'INVALID'">
          <app-form-errors
            errorPrefix="Este campo es requerido"
            [errors]="formFugas.get('email').errors">
          </app-form-errors>
        </mat-error>
      </mat-form-field>

      <div
        fxLayout="column"
        fxLayoutGap="8px"
        fxLayoutAlign="center center">
        <app-autorizacion-tratamiento
          (sendIdPolitic)="reciveIdPolitic($event)"
          fxLayout="column"
          fxLayoutGap="7px"
          fxLayoutAlign="center center"
          [control]="formFugas.get('autorizacion')">
        </app-autorizacion-tratamiento>
        <re-captcha
          (resolved)="recaptchaResolved($event)"
          formControlName="recaptcha">
        </re-captcha>
              <div
                  fxFill
                  class="terms-and-conditions"
                  fxLayout="row"
                  fxLayoutAlign="end end">
                    <button
                      color="accent"
                      mat-raised-button
                      (click)="crearReporteFuga()"
                      [disabled]="formFugas.invalid  || ( _loadingService.getHTTPStatus() | async)"
                      mat-button>
                      {{ textButton }}
                    </button>
              </div>
            </div>
      </form>
    </div>
  </div>
